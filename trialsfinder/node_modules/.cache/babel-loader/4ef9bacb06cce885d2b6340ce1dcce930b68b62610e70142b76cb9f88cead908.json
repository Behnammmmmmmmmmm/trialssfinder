{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useAuth}from'../hooks/useStore';import{trialsAPI}from'../api/trials';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const UserProfilePage=()=>{const{user}=useAuth();const[favorites,setFavorites]=useState([]);const[industries,setIndustries]=useState([]);const[localSelectedIndustries,setLocalSelectedIndustries]=useState([]);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);useEffect(()=>{loadData();},[]);const loadData=async()=>{try{const[favResponse,indResponse,userIndResponse]=await Promise.all([trialsAPI.getFavorites(),trialsAPI.getIndustries(),trialsAPI.getUserIndustries()]);setFavorites(favResponse.data);setIndustries(indResponse.data);const userIndustryIds=userIndResponse.data.map(ui=>ui.industry.id);setLocalSelectedIndustries(userIndustryIds);}catch(error){console.error('Failed to load data:',error);}finally{setLoading(false);}};const handleIndustryChange=industryId=>{setLocalSelectedIndustries(prev=>prev.includes(industryId)?prev.filter(id=>id!==industryId):[...prev,industryId]);};const saveIndustries=async()=>{setSaving(true);try{await trialsAPI.followIndustries(localSelectedIndustries);alert('Industries updated successfully! You will receive notifications for new trials in these industries.');}catch(error){console.error('Failed to update industries:',error);alert('Failed to update industries. Please try again.');}finally{setSaving(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container py-8 flex justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\",\"data-size\":\"lg\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container py-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-8\",children:\"My Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Account Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-muted\",children:\"Username\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:user?.username})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-muted\",children:\"Email\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:user?.email})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-muted\",children:\"Account Type\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium capitalize\",children:user?.user_type})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-muted\",children:\"Email Verified\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:user?.email_verified?/*#__PURE__*/_jsx(\"span\",{className:\"text-success\",children:\"\\u2713 Verified\"}):/*#__PURE__*/_jsx(\"span\",{className:\"text-warning\",children:\"\\u26A0 Not Verified\"})})]})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold\",children:\"Follow Industries\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-muted mt-1\",children:\"Get notified when new trials are posted in these industries\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-3 mb-6\",children:industries.map(industry=>/*#__PURE__*/_jsxs(\"label\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"form-check-input\",checked:localSelectedIndustries.includes(industry.id),onChange:()=>handleIndustryChange(industry.id)}),/*#__PURE__*/_jsx(\"span\",{className:\"form-check-label\",children:industry.name})]},industry.id))}),/*#__PURE__*/_jsx(\"button\",{onClick:saveIndustries,className:\"btn\",\"data-variant\":\"primary\",disabled:saving,children:saving?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner mr-2\"}),\"Saving...\"]}):'Save Industry Preferences'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold\",children:\"Favorite Trials\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:favorites.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-muted text-center py-8\",children:\"No favorite trials yet. Start exploring to add favorites!\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:favorites.map(fav=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-2\",children:fav.trial.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-3\",children:fav.trial.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-muted\",children:[\"Added \",new Date(fav.created_at).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"a\",{href:`/trials/${fav.trial.id}`,className:\"btn\",\"data-variant\":\"outline\",\"data-size\":\"sm\",children:\"View Details\"})]})]},fav.id))})})]})]})]})]});};export default UserProfilePage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}