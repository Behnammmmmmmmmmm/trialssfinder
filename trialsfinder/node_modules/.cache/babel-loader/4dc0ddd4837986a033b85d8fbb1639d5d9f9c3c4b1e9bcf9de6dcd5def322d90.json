{"ast":null,"code":"import React,{useEffect,useState,useCallback}from'react';import{useSearchParams,Link}from'react-router-dom';import{trialsAPI}from'../api/trials';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";export const SearchResultsPage=()=>{const[searchParams]=useSearchParams();const[trials,setTrials]=useState([]);const[industries,setIndustries]=useState([]);const[loading,setLoading]=useState(true);const[filters,setFilters]=useState({industry:'',location:''});const searchTrials=useCallback(async()=>{setLoading(true);try{const params={search:searchParams.get('q')||'',...filters};const response=await trialsAPI.list(params);const trialsData=response.data.results||response.data;setTrials(Array.isArray(trialsData)?trialsData:[]);}catch(error){console.error('Failed to search trials:',error);setTrials([]);}finally{setLoading(false);}},[searchParams,filters]);useEffect(()=>{loadIndustries();searchTrials();},[searchParams,searchTrials]);const loadIndustries=async()=>{try{const response=await trialsAPI.getIndustries();setIndustries(response.data);}catch(error){console.error('Failed to load industries:',error);}};const handleFilterChange=e=>{setFilters({...filters,[e.target.name]:e.target.value});};const applyFilters=()=>{searchTrials();};const searchQuery=searchParams.get('q')||'';return/*#__PURE__*/_jsxs(\"div\",{className:\"container py-8\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold mb-6\",children:[\"Search Results \",searchQuery&&`for \"${searchQuery}\"`]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-4 gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"Filters\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Industry\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"industry\",value:filters.industry,onChange:handleFilterChange,className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Industries\"}),industries.map(industry=>/*#__PURE__*/_jsx(\"option\",{value:industry.id,children:industry.name},industry.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"location\",value:filters.location,onChange:handleFilterChange,placeholder:\"Enter location\",className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:applyFilters,className:\"btn w-full\",\"data-variant\":\"primary\",children:\"Apply Filters\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-3\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\",\"data-size\":\"lg\"})}):trials.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-2\",children:\"No Results Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-6\",children:\"Try adjusting your search terms or filters\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn\",\"data-variant\":\"primary\",children:\"Browse All Trials\"})]})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted mb-4\",children:[\"Found \",trials.length,\" trial\",trials.length!==1?'s':'']}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:trials.map(trial=>/*#__PURE__*/_jsx(\"div\",{className:\"card hover:shadow-lg transition-shadow\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-2\",children:trial.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-3\",children:trial.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 text-sm text-muted\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83C\\uDFE2 \",trial.company_name]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83C\\uDFED \",trial.industry_name]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDCCD \",trial.location]})]})]}),/*#__PURE__*/_jsx(Link,{to:`/trials/${trial.id}`,className:\"btn ml-4\",\"data-variant\":\"outline\",children:\"View Details\"})]})})},trial.id))})]})})]})]});};export default SearchResultsPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}