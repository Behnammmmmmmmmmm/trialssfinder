"use strict";(self.webpackChunktrialssfinder=self.webpackChunktrialssfinder||[]).push([[26],{9026:(e,s,a)=>{a.r(s),a.d(s,{UserProfilePage:()=>c,default:()=>r});var i=a(5043),t=a(9070),l=a(9084),d=a(579);const c=()=>{const{user:e}=(0,t.As)(),[s,a]=(0,i.useState)([]),[c,r]=(0,i.useState)([]),[n,m]=(0,i.useState)([]),[o,x]=(0,i.useState)(!0),[h,u]=(0,i.useState)(!1);(0,i.useEffect)(()=>{j()},[]);const j=async()=>{try{const[e,s,i]=await Promise.all([l.K.getFavorites(),l.K.getIndustries(),l.K.getUserIndustries()]);a(e.data),r(s.data);const t=i.data.map(e=>e.industry.id);m(t)}catch(e){console.error("Failed to load data:",e)}finally{x(!1)}};return o?(0,d.jsx)("div",{className:"container py-8 flex justify-center",children:(0,d.jsx)("div",{className:"spinner","data-size":"lg"})}):(0,d.jsxs)("div",{className:"container py-8",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"My Profile"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,d.jsx)("div",{className:"lg:col-span-1",children:(0,d.jsx)("div",{className:"card",children:(0,d.jsxs)("div",{className:"card-body",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Account Information"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-muted",children:"Username"}),(0,d.jsx)("p",{className:"font-medium",children:null===e||void 0===e?void 0:e.username})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-muted",children:"Email"}),(0,d.jsx)("p",{className:"font-medium",children:null===e||void 0===e?void 0:e.email})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-muted",children:"Account Type"}),(0,d.jsx)("p",{className:"font-medium capitalize",children:null===e||void 0===e?void 0:e.user_type})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-muted",children:"Email Verified"}),(0,d.jsx)("p",{className:"font-medium",children:null!==e&&void 0!==e&&e.email_verified?(0,d.jsx)("span",{className:"text-success",children:"\u2713 Verified"}):(0,d.jsx)("span",{className:"text-warning",children:"\u26a0 Not Verified"})})]})]})]})})}),(0,d.jsxs)("div",{className:"lg:col-span-2",children:[(0,d.jsxs)("div",{className:"card mb-8",children:[(0,d.jsxs)("div",{className:"card-header",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold",children:"Follow Industries"}),(0,d.jsx)("p",{className:"text-sm text-muted mt-1",children:"Get notified when new trials are posted in these industries"})]}),(0,d.jsxs)("div",{className:"card-body",children:[(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-6",children:c.map(e=>(0,d.jsxs)("label",{className:"form-check",children:[(0,d.jsx)("input",{type:"checkbox",className:"form-check-input",checked:n.includes(e.id),onChange:()=>{return s=e.id,void m(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s}}),(0,d.jsx)("span",{className:"form-check-label",children:e.name})]},e.id))}),(0,d.jsx)("button",{onClick:async()=>{u(!0);try{await l.K.followIndustries(n),alert("Industries updated successfully! You will receive notifications for new trials in these industries.")}catch(e){console.error("Failed to update industries:",e),alert("Failed to update industries. Please try again.")}finally{u(!1)}},className:"btn","data-variant":"primary",disabled:h,children:h?(0,d.jsxs)("span",{className:"flex items-center",children:[(0,d.jsx)("span",{className:"spinner mr-2"}),"Saving..."]}):"Save Industry Preferences"})]})]}),(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h2",{className:"text-xl font-semibold",children:"Favorite Trials"})}),(0,d.jsx)("div",{className:"card-body",children:0===s.length?(0,d.jsx)("p",{className:"text-muted text-center py-8",children:"No favorite trials yet. Start exploring to add favorites!"}):(0,d.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,d.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.trial.title}),(0,d.jsx)("p",{className:"text-muted mb-3",children:e.trial.description}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("span",{className:"text-sm text-muted",children:["Added ",new Date(e.created_at).toLocaleDateString()]}),(0,d.jsx)("a",{href:`/trials/${e.trial.id}`,className:"btn","data-variant":"outline","data-size":"sm",children:"View Details"})]})]},e.id))})})]})]})]})]})},r=c}}]);
//# sourceMappingURL=26.03fcefbd.chunk.js.map