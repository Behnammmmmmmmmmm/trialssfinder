(self.webpackChunktrialsfinder=self.webpackChunktrialsfinder||[]).push([[138],{4192:(e,a,s)=>{s.r(a),s.d(a,{UserProfilePage:()=>c,default:()=>r});var i=s(5299),t=s(9098),l=s(1098),d=s(2240);const c=()=>{const{user:e}=(0,t.As)(),[a,s]=(0,i.useState)([]),[c,r]=(0,i.useState)([]),[n,m]=(0,i.useState)([]),[o,h]=(0,i.useState)(!0),[u,p]=(0,i.useState)(!1);(0,i.useEffect)(()=>{N()},[]);const N=async()=>{try{const[e,a,i]=await Promise.all([l.K.getFavorites(),l.K.getIndustries(),l.K.getUserIndustries()]);s(e.data),r(a.data);const t=i.data.map(e=>e.industry.id);m(t)}catch(e){void 0}finally{h(!1)}};return o?(0,d.Y)("div",{className:"container py-8 flex justify-center",children:(0,d.Y)("div",{className:"spinner","data-size":"lg"})}):(0,d.FD)("div",{className:"container py-8",children:[(0,d.Y)("h1",{className:"text-3xl font-bold mb-8",children:"My Profile"}),(0,d.FD)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,d.Y)("div",{className:"lg:col-span-1",children:(0,d.Y)("div",{className:"card",children:(0,d.FD)("div",{className:"card-body",children:[(0,d.Y)("h2",{className:"text-xl font-semibold mb-4",children:"Account Information"}),(0,d.FD)("div",{className:"space-y-3",children:[(0,d.FD)("div",{children:[(0,d.Y)("p",{className:"text-sm text-muted",children:"Username"}),(0,d.Y)("p",{className:"font-medium",children:e?.username})]}),(0,d.FD)("div",{children:[(0,d.Y)("p",{className:"text-sm text-muted",children:"Email"}),(0,d.Y)("p",{className:"font-medium",children:e?.email})]}),(0,d.FD)("div",{children:[(0,d.Y)("p",{className:"text-sm text-muted",children:"Account Type"}),(0,d.Y)("p",{className:"font-medium capitalize",children:e?.user_type})]}),(0,d.FD)("div",{children:[(0,d.Y)("p",{className:"text-sm text-muted",children:"Email Verified"}),(0,d.Y)("p",{className:"font-medium",children:e?.email_verified?(0,d.Y)("span",{className:"text-success",children:"\u2713 Verified"}):(0,d.Y)("span",{className:"text-warning",children:"\u26a0 Not Verified"})})]})]})]})})}),(0,d.FD)("div",{className:"lg:col-span-2",children:[(0,d.FD)("div",{className:"card mb-8",children:[(0,d.FD)("div",{className:"card-header",children:[(0,d.Y)("h2",{className:"text-xl font-semibold",children:"Follow Industries"}),(0,d.Y)("p",{className:"text-sm text-muted mt-1",children:"Get notified when new trials are posted in these industries"})]}),(0,d.FD)("div",{className:"card-body",children:[(0,d.Y)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-6",children:c.map(e=>(0,d.FD)("label",{className:"form-check",children:[(0,d.Y)("input",{type:"checkbox",className:"form-check-input",checked:n.includes(e.id),onChange:()=>{return a=e.id,void m(e=>e.includes(a)?e.filter(e=>e!==a):[...e,a]);var a}}),(0,d.Y)("span",{className:"form-check-label",children:e.name})]},e.id))}),(0,d.Y)("button",{onClick:async()=>{p(!0);try{await l.K.followIndustries(n),alert("Industries updated successfully! You will receive notifications for new trials in these industries.")}catch(e){void 0,alert("Failed to update industries. Please try again.")}finally{p(!1)}},className:"btn","data-variant":"primary",disabled:u,children:u?(0,d.FD)("span",{className:"flex items-center",children:[(0,d.Y)("span",{className:"spinner mr-2"}),"Saving..."]}):"Save Industry Preferences"})]})]}),(0,d.FD)("div",{className:"card",children:[(0,d.Y)("div",{className:"card-header",children:(0,d.Y)("h2",{className:"text-xl font-semibold",children:"Favorite Trials"})}),(0,d.Y)("div",{className:"card-body",children:0===a.length?(0,d.Y)("p",{className:"text-muted text-center py-8",children:"No favorite trials yet. Start exploring to add favorites!"}):(0,d.Y)("div",{className:"space-y-4",children:a.map(e=>(0,d.FD)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,d.Y)("h3",{className:"text-lg font-semibold mb-2",children:e.trial.title}),(0,d.Y)("p",{className:"text-muted mb-3",children:e.trial.description}),(0,d.FD)("div",{className:"flex items-center justify-between",children:[(0,d.FD)("span",{className:"text-sm text-muted",children:["Added ",new Date(e.created_at).toLocaleDateString()]}),(0,d.Y)("a",{href:`/trials/${e.trial.id}`,className:"btn","data-variant":"outline","data-size":"sm",children:"View Details"})]})]},e.id))})})]})]})]})]})},r=c}}]);