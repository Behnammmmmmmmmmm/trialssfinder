(self.webpackChunktrialsfinder=self.webpackChunktrialsfinder||[]).push([[36],{1852:(e,t,a)=>{a.r(t),a.d(t,{AnalyticsPage:()=>s,default:()=>l});var n=a(5299),i=a(4976),d=a(583),r=a(1098),c=a(2240);const s=()=>{const[e]=(0,i.ok)(),[t,a]=(0,n.useState)([]),[s,l]=(0,n.useState)(null),[o,h]=(0,n.useState)({start_date:"",end_date:""}),[u,p]=(0,n.useState)(null),y=(0,n.useCallback)(async()=>{if(s)try{const e=await d.r.getTrialMetrics(s,o);p(e.data)}catch(e){void 0}},[s,o]);(0,n.useEffect)(()=>{v();const t=e.get("trial");t&&l(parseInt(t))},[e]),(0,n.useEffect)(()=>{s&&y()},[s,o,y]);const v=async()=>{try{const e=await r.K.companyTrials(),t=e.data.results||e.data;a(Array.isArray(t)?t:[])}catch(e){void 0,a([])}};return(0,c.FD)("div",{children:[(0,c.Y)("h1",{children:"Analytics Dashboard"}),(0,c.FD)("div",{children:[(0,c.FD)("select",{value:s||"",onChange:e=>l(e.target.value?parseInt(e.target.value):null),children:[(0,c.Y)("option",{value:"",children:"Select a trial"}),t.map(e=>(0,c.Y)("option",{value:e.id,children:e.title},e.id))]}),(0,c.Y)("input",{type:"date",value:o.start_date,onChange:e=>h({...o,start_date:e.target.value})}),(0,c.Y)("input",{type:"date",value:o.end_date,onChange:e=>h({...o,end_date:e.target.value})})]}),u&&(0,c.FD)("div",{children:[(0,c.Y)("h2",{children:"Summary Stats"}),(0,c.FD)("p",{children:["Views: ",u.views]}),(0,c.FD)("p",{children:["Clicks: ",u.clicks]}),(0,c.FD)("p",{children:["Conversions: ",u.conversions.toFixed(2),"%"]}),(0,c.Y)("h2",{children:"Weekly Chart"}),u.weekly_data.map(e=>(0,c.Y)("div",{children:(0,c.FD)("span",{children:[e.date,": Views: ",e.views,", Clicks: ",e.clicks]})},e.date)),(0,c.Y)("h2",{children:"Monthly Chart"}),u.monthly_data.map(e=>(0,c.Y)("div",{children:(0,c.FD)("span",{children:[e.date,": Events: ",e.events]})},e.date))]})]})},l=s},6182:(e,t,a)=>{a.r(t),a.d(t,{SubscriptionPage:()=>c,default:()=>s});var n=a(5299),i=a(7767),d=a(6869);var r=a(2240);const c=()=>{const{trialId:e}=(0,i.g)(),t=(0,i.Zp)(),[a,c]=(0,n.useState)([]),[s,l]=(0,n.useState)([]),[o,h]=(0,n.useState)([]),[u,p]=(0,n.useState)(""),[y,v]=(0,n.useState)({method_type:"credit_card",last_four:"",is_default:!1});(0,n.useEffect)(()=>{m()},[]);const m=async()=>{try{const e=await d.Ay.get("/subscriptions/payment-methods/");c(e.data);const t=await d.Ay.get("/subscriptions/");l(t.data);const a=await d.Ay.get("/subscriptions/invoices/");h(a.data)}catch(e){void 0}};return e?(0,r.FD)("div",{children:[(0,r.Y)("h1",{children:"Payment for Trial"}),(0,r.Y)("h3",{children:"Select Payment Method"}),a.map(a=>(0,r.FD)("div",{children:[(0,r.FD)("span",{children:[a.method_type," ending in ",a.last_four]}),(0,r.Y)("button",{onClick:()=>(async a=>{if(e)try{await(n={trial_id:parseInt(e),payment_method_id:a},d.Ay.post("/subscriptions/create/",n)),t("/payment-success")}catch(i){void 0}var n})(a.id),children:"Pay with this method"})]},a.id))]}):(0,r.FD)("div",{children:[(0,r.Y)("h1",{children:"Subscription Management"}),(0,r.Y)("h2",{children:"Your Subscriptions"}),s.map(e=>(0,r.FD)("div",{children:[(0,r.Y)("h3",{children:e.trial_name}),(0,r.FD)("p",{children:["Amount: $",e.amount]}),(0,r.FD)("p",{children:["Status: ",e.status]}),(0,r.FD)("p",{children:["Date: ",e.created_at]})]},e.id)),(0,r.Y)("h2",{children:"Address"}),(0,r.Y)("input",{type:"text",value:u,onChange:e=>p(e.target.value),placeholder:"Address"}),(0,r.Y)("button",{onClick:async()=>{try{await(e=>d.Ay.post("/subscriptions/update-address/",{address:e}))(u),alert("Address updated")}catch(e){void 0}},children:"Update Address"}),(0,r.Y)("h2",{children:"Payment Methods"}),a.map(e=>(0,r.FD)("div",{children:[(0,r.FD)("span",{children:[e.method_type," ending in ",e.last_four]}),e.is_default&&(0,r.Y)("span",{children:" (Default)"}),(0,r.Y)("button",{onClick:()=>(async e=>{try{await(e=>d.Ay.post(`/subscriptions/payment-methods/${e}/set-default/`))(e),m()}catch(t){void 0}})(e.id),children:"Make Default"}),(0,r.Y)("button",{onClick:()=>(async e=>{try{await(e=>d.Ay.delete(`/subscriptions/payment-methods/${e}/`))(e),m()}catch(t){void 0}})(e.id),children:"Remove"})]},e.id)),(0,r.Y)("h3",{children:"Add Payment Method"}),(0,r.FD)("select",{value:y.method_type,onChange:e=>v({...y,method_type:e.target.value}),children:[(0,r.Y)("option",{value:"credit_card",children:"Credit Card"}),(0,r.Y)("option",{value:"paypal",children:"PayPal"})]}),(0,r.Y)("input",{type:"text",value:y.last_four,onChange:e=>v({...y,last_four:e.target.value}),placeholder:"Last 4 digits",maxLength:4}),(0,r.FD)("label",{children:[(0,r.Y)("input",{type:"checkbox",checked:y.is_default,onChange:e=>v({...y,is_default:e.target.checked})}),"Set as default"]}),(0,r.Y)("button",{onClick:async()=>{try{await(e=y,d.Ay.post("/subscriptions/payment-methods/",e)),m(),v({method_type:"credit_card",last_four:"",is_default:!1})}catch(t){void 0}var e},children:"Add"}),(0,r.Y)("h2",{children:"Invoices"}),o.map(e=>(0,r.FD)("div",{children:[(0,r.FD)("p",{children:["Amount: $",e.amount]}),(0,r.FD)("p",{children:["Date: ",e.created_at]})]},e.id))]})},s=c},8388:(e,t,a)=>{a.r(t),a.d(t,{CreateTrialPage:()=>c,default:()=>s});var n=a(5299),i=a(7767),d=a(1098),r=a(2240);const c=()=>{const e=(0,i.Zp)(),[t,a]=(0,n.useState)([]),[c,s]=(0,n.useState)({title:"",description:"",industry:"",location:"",start_date:"",end_date:""});(0,n.useEffect)(()=>{l()},[]);const l=async()=>{try{const e=await d.K.getIndustries();a(e.data)}catch(e){void 0}},o=e=>{s({...c,[e.target.name]:e.target.value})};return(0,r.FD)("div",{children:[(0,r.Y)("h1",{children:"Create Trial"}),(0,r.FD)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await d.K.create(c);e(`/payment/${t.data.id}`)}catch(a){void 0}},children:[(0,r.Y)("input",{type:"text",name:"title",value:c.title,onChange:o,placeholder:"Title"}),(0,r.Y)("textarea",{name:"description",value:c.description,onChange:o,placeholder:"Description"}),(0,r.FD)("select",{name:"industry",value:c.industry,onChange:o,children:[(0,r.Y)("option",{value:"",children:"Select Industry"}),t.map(e=>(0,r.Y)("option",{value:e.id,children:e.name},e.id))]}),(0,r.Y)("input",{type:"text",name:"location",value:c.location,onChange:o,placeholder:"Location"}),(0,r.Y)("input",{type:"date",name:"start_date",value:c.start_date,onChange:o}),(0,r.Y)("input",{type:"date",name:"end_date",value:c.end_date,onChange:o}),(0,r.Y)("button",{type:"submit",children:"Create Trial"})]})]})},s=c}}]);