(self.webpackChunktrialsfinder=self.webpackChunktrialsfinder||[]).push([[852],{1852:(e,t,a)=>{a.r(t),a.d(t,{AnalyticsPage:()=>s,default:()=>c});var n=a(5299),i=a(4976),l=a(583),r=a(1098),d=a(2240);const s=()=>{const[e]=(0,i.ok)(),[t,a]=(0,n.useState)([]),[s,c]=(0,n.useState)(null),[h,u]=(0,n.useState)({start_date:"",end_date:""}),[o,v]=(0,n.useState)(null),p=(0,n.useCallback)(async()=>{if(s)try{const e=await l.r.getTrialMetrics(s,h);v(e.data)}catch(e){void 0}},[s,h]);(0,n.useEffect)(()=>{y();const t=e.get("trial");t&&c(parseInt(t))},[e]),(0,n.useEffect)(()=>{s&&p()},[s,h,p]);const y=async()=>{try{const e=await r.K.companyTrials(),t=e.data.results||e.data;a(Array.isArray(t)?t:[])}catch(e){void 0,a([])}};return(0,d.FD)("div",{children:[(0,d.Y)("h1",{children:"Analytics Dashboard"}),(0,d.FD)("div",{children:[(0,d.FD)("select",{value:s||"",onChange:e=>c(e.target.value?parseInt(e.target.value):null),children:[(0,d.Y)("option",{value:"",children:"Select a trial"}),t.map(e=>(0,d.Y)("option",{value:e.id,children:e.title},e.id))]}),(0,d.Y)("input",{type:"date",value:h.start_date,onChange:e=>u({...h,start_date:e.target.value})}),(0,d.Y)("input",{type:"date",value:h.end_date,onChange:e=>u({...h,end_date:e.target.value})})]}),o&&(0,d.FD)("div",{children:[(0,d.Y)("h2",{children:"Summary Stats"}),(0,d.FD)("p",{children:["Views: ",o.views]}),(0,d.FD)("p",{children:["Clicks: ",o.clicks]}),(0,d.FD)("p",{children:["Conversions: ",o.conversions.toFixed(2),"%"]}),(0,d.Y)("h2",{children:"Weekly Chart"}),o.weekly_data.map(e=>(0,d.Y)("div",{children:(0,d.FD)("span",{children:[e.date,": Views: ",e.views,", Clicks: ",e.clicks]})},e.date)),(0,d.Y)("h2",{children:"Monthly Chart"}),o.monthly_data.map(e=>(0,d.Y)("div",{children:(0,d.FD)("span",{children:[e.date,": Events: ",e.events]})},e.date))]})]})},c=s}}]);