const STATIC_CACHE_URLS=["/","/offline.html","/manifest.json","/favicon.svg"];self.addEventListener("install",e=>{e.waitUntil(caches.open("trialsfinder-v1").then(e=>e.addAll(STATIC_CACHE_URLS)).then(()=>self.skipWaiting()))}),self.addEventListener("activate",e=>{e.waitUntil(caches.keys().then(e=>Promise.all(e.filter(e=>"trialsfinder-v1"!==e&&"runtime-cache"!==e).map(e=>caches.delete(e)))).then(()=>self.clients.claim()))}),self.addEventListener("fetch",e=>{if("GET"!==e.request.method)return;const{request:t}=e,n=new URL(t.url);return n.origin===location.origin?n.pathname.startsWith("/api/")?(e.respondWith(fetch(t).then(e=>{const n=e.clone();return caches.open("runtime-cache").then(e=>{e.put(t,n)}),e}).catch(()=>caches.match(t))),void 0):(e.respondWith(caches.match(t).then(e=>e||fetch(t).then(e=>{if(!e||200!==e.status||"basic"!==e.type)return e;const n=e.clone();return caches.open("runtime-cache").then(e=>{e.put(t,n)}),e})).catch(()=>{if("document"===t.destination)return caches.match("/offline.html")})),void 0):void 0});